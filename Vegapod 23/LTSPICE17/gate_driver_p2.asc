Version 4
SHEET 1 3944 1912
WIRE 624 -208 304 -208
WIRE 560 -192 16 -192
WIRE -256 -144 -400 -144
WIRE -64 -144 -256 -144
WIRE 176 -144 -64 -144
WIRE 304 -144 304 -208
WIRE 304 -144 176 -144
WIRE 368 -144 304 -144
WIRE 624 -144 624 -208
WIRE 368 -128 368 -144
WIRE 176 -96 176 -144
WIRE -688 -80 -736 -80
WIRE 288 -80 224 -80
WIRE 464 -80 432 -80
WIRE 544 -48 544 -80
WIRE 624 -48 624 -64
WIRE 624 -48 544 -48
WIRE -64 -16 -64 -64
WIRE 16 -16 16 -112
WIRE 16 -16 -64 -16
WIRE 624 -16 624 -48
WIRE -960 0 -992 0
WIRE -752 0 -768 0
WIRE -400 0 -400 -144
WIRE 368 0 368 -32
WIRE 368 0 288 0
WIRE 368 16 368 0
WIRE -448 32 -640 32
WIRE -256 32 -256 -64
WIRE -208 32 -256 32
WIRE 176 32 176 0
WIRE 336 32 256 32
WIRE 560 32 560 -192
WIRE -736 48 -736 -80
WIRE -720 48 -736 48
WIRE -64 48 -64 -16
WIRE -48 48 -64 48
WIRE 64 48 -48 48
WIRE -1072 80 -1184 80
WIRE -992 80 -992 0
WIRE -208 80 -208 32
WIRE -208 80 -240 80
WIRE -192 80 -208 80
WIRE -48 80 -48 48
WIRE 64 80 64 48
WIRE 256 80 256 32
WIRE 256 80 176 80
WIRE -960 96 -976 96
WIRE 336 96 336 32
WIRE -752 128 -752 0
WIRE -720 128 -752 128
WIRE -640 128 -640 32
WIRE -640 128 -720 128
WIRE -448 128 -448 32
WIRE -384 128 -448 128
WIRE -192 128 -192 80
WIRE -976 144 -976 96
WIRE -896 144 -976 144
WIRE -960 160 -1184 160
WIRE -896 160 -896 144
WIRE -896 160 -960 160
WIRE -768 160 -768 96
WIRE -720 160 -768 160
WIRE -192 160 -192 128
WIRE 128 160 64 160
WIRE -400 176 -400 80
WIRE -240 176 -400 176
WIRE -176 176 -240 176
WIRE -48 176 -176 176
WIRE 128 176 -48 176
WIRE 176 176 128 176
WIRE -960 224 -960 160
WIRE -720 224 -720 160
WIRE -720 224 -960 224
WIRE -688 224 -688 0
WIRE -688 224 -720 224
WIRE -176 224 -176 176
WIRE -176 224 -688 224
WIRE 368 224 368 96
WIRE 624 224 624 80
WIRE 624 224 368 224
WIRE 128 240 128 176
WIRE 256 240 256 160
WIRE 256 240 128 240
WIRE 336 240 336 160
WIRE 336 240 256 240
WIRE 368 240 368 224
WIRE 368 240 336 240
FLAG 176 176 0
SYMBOL nmos 128 80 R0
SYMATTR InstName M1
SYMATTR Value irf540n
SYMATTR Prefix X
SYMBOL voltage -400 -16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=0.1
SYMATTR InstName V1
SYMATTR Value 15
SYMBOL npn -112 80 R0
SYMATTR InstName Q1
SYMATTR Value 2N3904
SYMBOL res -80 -160 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL res -96 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1k
SYMATTR SpiceLine tol=5 pwr=0.25
SYMBOL voltage -1184 64 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3.3 0u 0u 0u 50u 100u)
SYMBOL pmos 224 0 R180
SYMATTR InstName M2
SYMATTR Value irf9540npbf
SYMATTR Prefix X
SYMBOL res 48 64 R0
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL pnp 432 -32 R180
SYMATTR InstName Q2
SYMATTR Value 2N3906
SYMBOL res 352 0 R0
SYMATTR InstName R5
SYMATTR Value 220
SYMBOL res 560 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 272 -96 R0
SYMATTR InstName R7
SYMATTR Value 100
SYMBOL res 608 -160 R0
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL npn 560 -16 R0
SYMATTR InstName Q3
SYMATTR Value 2N3904
SYMBOL res 272 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 10
SYMBOL res 240 64 R0
SYMATTR InstName R4
SYMATTR Value 1000
SYMBOL npn -304 80 R0
SYMATTR InstName Q4
SYMATTR Value 2N3904
SYMBOL res -272 -160 R0
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res -288 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res 0 -208 R0
SYMATTR InstName R9
SYMATTR Value 10k
SYMBOL res -976 64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 100
SYMBOL voltage -688 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL res -736 32 R0
SYMATTR InstName R14
SYMATTR Value 470
SYMBOL Optos\\PC817C -864 48 R0
SYMATTR InstName U1
SYMBOL cap 320 96 R0
SYMATTR InstName C1
SYMATTR Value 100n
TEXT -592 232 Left 2 !.tran 0.0005s
TEXT 832 -8 Left 2 !.SUBCKT irf540n 1 2 3\n* SPICE3 MODEL WITH THERMAL RC NETWORK\n**************************************\n*      Model Generated by MODPEX     *\n*Copyright(c) Symmetry Design Systems*\n*         All Rights Reserved        *\n*    UNPUBLISHED LICENSED SOFTWARE   *\n*   Contains Proprietary Information *\n*      Which is The Property of      *\n*     SYMMETRY OR ITS LICENSORS      *\n*Commercial Use or Resale Restricted *\n*   by Symmetry License Agreement    *\n**************************************\n* Model generated on Sep  5, 01\n* MODEL FORMAT: SPICE3\n* Symmetry POWER MOS Model (Version 1.0)\n* External Node Designations\n* Node 1 -> Drain\n* Node 2 -> Gate\n* Node 3 -> Source\nM1 9 7 8 8 MM L=100u W=100u\n.MODEL MM NMOS LEVEL=1 IS=1e-32\n+VTO=3.58173 LAMBDA=0.00806114 KP=112.25\n+CGSO=1.896e-05 CGDO=1e-11\nRS 8 3 0.025918\nD1 3 1 MD\n.MODEL MD D IS=1.565e-11 RS=0.006486 N=1.1328 BV=100\n+IBV=0.00025 EG=1.2 XTI=3.32496 TT=0\n+CJO=1.16e-09 VJ=3.16363 M=0.840542 FC=0.5\nRDS 3 1 1e+06\nRD 9 1 0.0130608\nRG 2 7 6.45271\nD2 4 5 MD1\n* Default values used in MD1:\n*   RS=0 EG=1.11 XTI=3.0 TT=0\n*   BV=infinite IBV=1mA\n.MODEL MD1 D IS=1e-32 N=50\n+CJO=1.30485e-09 VJ=0.899032 M=0.9 FC=1e-08\nD3 0 5 MD2\n* Default values used in MD2:\n*   EG=1.11 XTI=3.0 TT=0 CJO=0\n*   BV=infinite IBV=1mA\n.MODEL MD2 D IS=1e-10 N=0.4 RS=3e-06\nRL 5 10 1\nFI2 7 9 VFI2 -1\nVFI2 4 0 0\nEV16 10 0 9 7 1\nCAP 11 10 2.35428e-09\nFI1 7 9 VFI1 -1\nVFI1 11 6 0\nRCAP 6 10 1\nD4 0 6 MD3\n* Default values used in MD3:\n*   EG=1.11 XTI=3.0 TT=0 CJO=0\n*   RS=0 BV=infinite IBV=1mA\n.MODEL MD3 D IS=1e-10 N=0.4\n.ENDS irf540n\n \n*SPICE Thermal Model Subcircuit\n.SUBCKT irf540nt 3 0\n \nR_RTHERM1         2 3  0.158\nR_RTHERM2         1 2  0.274\nR_RTHERM3         0 1  0.29\nC_CTHERM1         2 3  0.00131\nC_CTHERM2         1 2  0.001686\nC_CTHERM3         0 1  0.022562\n \n.ENDS irf540nt
TEXT 1680 -64 Left 2 !.SUBCKT irf9540npbf 1 2 3\n**************************************\n*      Model Generated by MODPEX     *\n*Copyright(c) Symmetry Design Systems*\n*         All Rights Reserved        *\n*    UNPUBLISHED LICENSED SOFTWARE   *\n*   Contains Proprietary Information *\n*      Which is The Property of      *\n*     SYMMETRY OR ITS LICENSORS      *\n*Commercial Use or Resale Restricted *\n*   by Symmetry License Agreement    *\n**************************************\n* Model generated on Aug 15, 17\n* MODEL FORMAT: SPICE3\n* Symmetry POWER MOS Model (Version 1.0)\n* External Node Designations\n* Node 1 -> Drain\n* Node 2 -> Gate\n* Node 3 -> Source\nM1 9 7 8 8 MM L=100u W=100u\n.MODEL MM PMOS LEVEL=1 IS=1e-32\n+VTO=-3.74034 LAMBDA=0.00254531 KP=6.90462\n+CGSO=1.15995e-05 CGDO=1e-11\nRS 8 3 0.0448511\nD1 1 3 MD\n.MODEL MD D IS=4.56468e-09 RS=0.00874877 N=1.45317 BV=100\n+IBV=0.00025 EG=1.15553 XTI=3.00117 TT=1e-07\n+CJO=9.64423e-10 VJ=0.500897 M=0.387171 FC=0.5\nRDS 3 1 2e+07\nRD 9 1 0.0421247\nRG 2 7 6.66725\nD2 5 4 MD1\n* Default values used in MD1:\n*   RS=0 EG=1.11 XTI=3.0 TT=0\n*   BV=infinite IBV=1mA\n.MODEL MD1 D IS=1e-32 N=50\n+CJO=3.36744e-09 VJ=0.5 M=0.683702 FC=1e-08\nD3 5 0 MD2\n* Default values used in MD2:\n*   EG=1.11 XTI=3.0 TT=0 CJO=0\n*   BV=infinite IBV=1mA\n.MODEL MD2 D IS=1e-10 N=0.4 RS=2.99982e-06\nRL 5 10 1\nFI2 7 9 VFI2 -1\nVFI2 4 0 0\nEV16 10 0 9 7 1\nCAP 11 10 3.66446e-09\nFI1 7 9 VFI1 -1\nVFI1 11 6 0\nRCAP 6 10 1\nD4 6 0 MD3\n* Default values used in MD3:\n*   EG=1.11 XTI=3.0 TT=0 CJO=0\n*   RS=0 BV=infinite IBV=1mA\n.MODEL MD3 D IS=1e-10 N=0.4\n.ENDS irf9540npbf
